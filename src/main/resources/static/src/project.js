require=function s(o,a,r){function l(n,e){if(!a[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(h)return h(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var i=a[n]={exports:{}};o[n][0].call(i.exports,function(e){var t=o[n][1][e];return l(t||e)},i,i.exports,s,o,a,r)}return a[n].exports}for(var h="function"==typeof require&&require,e=0;e<r.length;e++)l(r[e]);return l}({Config:[function(e,t,n){"use strict";cc._RF.push(t,"fe9daLU595Plb4kDTjl/D3B","Config");var c=c||{};c.gearInfo=[315,45,135,225],c.singleGame=1,c.doubleGame=2,c.domain="",c.isSingle=1,c.isFollower=0,c.uid="",t.exports=c,cc._RF.pop()},{}],Global:[function(e,t,n){"use strict";cc._RF.push(t,"67427ZfQqtDvKW7HiyNOGkj","Global");var c=c||{};c.gameType=null,c.openSpeeker=null,t.exports=c,cc._RF.pop()},{}],HomeGame:[function(e,t,n){"use strict";cc._RF.push(t,"76bb89LL9JIFrWJBNbSxkbM","HomeGame");var c=e("Global"),i=e("Config");cc.Class({extends:cc.Component,properties:{speeker:{default:null,type:cc.Node},singleBtn:{default:null,type:cc.Button},doubleBtn:{default:null,type:cc.Button},descBtn:{default:null,type:cc.Button},speekerBtn:{default:null,type:cc.Button},singleScene:"",doubleScene:"",descScene:""},onLoad:function(){c.openSpeeker=!0,this.singleBtn.node.on("click",function(){this.switchScene(this.singleScene),c.gameType=i.singleGame},this),this.doubleBtn.node.on("click",function(){this.switchScene(this.doubleScene),c.gameType=i.doubleGame},this),this.descBtn.node.on("click",function(){this.switchScene(this.descScene)},this),this.speekerBtn.node.on("click",this.switchSpeeker,this)},switchScene:function(e){cc.director.loadScene(e)},switchSpeeker:function(){c.openSpeeker?c.openSpeeker=!1:c.openSpeeker=!0}}),cc._RF.pop()},{Config:"Config",Global:"Global"}],Invitation:[function(s,e,t){"use strict";cc._RF.push(e,"a94769tGpJAAouGZicygn2K","Invitation"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var c=s("Config"),e=c.domain+"/aihun/getQRCode",i=this,t=cc.loader.getXMLHttpRequest(),n="userId="+c.uid;t.onreadystatechange=function(){if(4==t.readyState&&200<=t.status&&t.status<400){var e=JSON.parse(t.responseText);cc.log(e.imgUrl),cc.loader.load(e.imgUrl,function(e,t){var n=new cc.SpriteFrame(t);i.node.getComponent(cc.Sprite).spriteFrame=n,cc.log(c.test)})}},t.open("POST",e,!0),t.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded"),t.send(n)},start:function(){}}),cc._RF.pop()},{Config:"Config"}],LoadScene:[function(e,t,n){"use strict";cc._RF.push(t,"7569chFCwdAM6eBX3b01Dhc","LoadScene"),cc.Class({extends:cc.Component,properties:{},start:function(){},loadAddContactScene:function(){cc.director.loadScene("contact")},loadShare:function(){cc.director.loadScene("share")},loadHome:function(){cc.director.loadScene("home")}}),cc._RF.pop()},{}],Loading:[function(e,t,n){"use strict";cc._RF.push(t,"14fd5RPbwJAWpTa1VjWkbhL","Loading"),cc.Class({extends:cc.Component,properties:{time:1,loadNewScene:""},onLoad:function(){var c=this,i=e("Config");i.uid=this.getParam("userId"),this.callback=function(){var e=this.getParam("uid");if(null===e)cc.director.loadScene(c.loadNewScene);else{var t=i.domain+"/aihun/getGameTeam?uid="+e+"&userId="+i.uid,n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){4==n.readyState&&200<=n.status&&n.status<400&&(1===JSON.parse(n.responseText).code?(i.isFollower=1,cc.director.loadScene("teaBeginGame")):cc.director.loadScene(c.loadNewScene))},n.open("GET",t,!0),n.send(null)}},this.schedule(this.callback,this.time)},start:function(){},getParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}}),cc._RF.pop()},{Config:"Config"}],NextGame:[function(e,t,n){"use strict";cc._RF.push(t,"1f63fco9cREa7mVvU06M3Yf","NextGame"),cc.Class({extends:cc.Component,properties:{firstBtn:{default:null,type:cc.Button},secondBtn:{default:null,type:cc.Button},firstScene:"",secondScene:""},onLoad:function(){null!==this.firstBtn&&this.firstBtn.node.on("click",function(){this.switchScene(this.firstScene)},this),null!==this.secondBtn&&this.secondBtn.node.on("click",function(){this.switchScene(this.secondScene)},this)},switchScene:function(e){cc.director.loadScene(e)}}),cc._RF.pop()},{}],PlayGame:[function(e,t,n){"use strict";cc._RF.push(t,"9f656w/2p1Fu7QjuowcDmmy","PlayGame");var c=e("Global"),i=e("Config");cc.Class({extends:cc.Component,properties:{cows:{default:null,type:cc.Node},distance:0,shakeThreshold:0,standardDistance:0,minScale:0,cdSpeed:0,cdTime:0,progressBar:{default:null,type:cc.ProgressBar},failScene:"",singleSucessScene:"",doubleSucessScene:""},onLoad:function(){this._last_update_time=0,this._time=10,this._scale=1,this._enableDeviceMotion(),this.progressBar.progress=1,this._pingpong=!0},_enableDeviceMotion:function(){cc.systemEvent.setAccelerometerEnabled(!0),cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},_destroyDeviceMotion:function(){cc.systemEvent.setAccelerometerEnabled(!1),cc.systemEvent.off(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},onDeviceMotionEvent:function(e){var t=0,n=0,c=0,i=0,s=0,o=0,a=(new Date).getTime();if(a-this._last_update_time>this._time){var r=a-this._last_update_time;this._last_update_time=a,t=e.acc.x,n=e.acc.y,c=e.acc.z;var l=(Math.abs(t+n+c-i-s-o)/r*1e4).toFixed(2);if(l>this.shakeThreshold){this._scale<=this.minScale?this._scale=this.minScale:this._scale=(this.cows.y-this.node.y)/this.standardDistance;var h=cc.moveTo(.25,this.node.x,this.node.y+l/this.shakeThreshold*this.distance),d=cc.scaleTo(.25,this._scale);this.node.runAction(cc.spawn(h,d))}i=t,s=n,o=c}},onCollisionEnter:function(e,t){null!==c.gameType&&c.gameType===i.doubleGame?this.finishGame(this.doubleSucessScene):this.finishGame(this.singleSucessScene)},start:function(){this.callback=function(){this.cdTime<=0&&this.finishGame(this.failScene),3==this.cdTime&&cc.log("播放滴滴声"),this.cdTime--},this.schedule(this.callback,1),cc.director.getCollisionManager().enabled=!0},finishGame:function(e){this.unschedule(this.callback),this._pingpong=!1,this._destroyDeviceMotion(),cc.director.loadScene(e)},update:function(e){this._updateProgressBar(this.progressBar,e)},_updateProgressBar:function(e,t){var n=e.progress;this._pingpong&&(n-=t*this.cdSpeed),e.progress=n}}),cc._RF.pop()},{Config:"Config",Global:"Global"}],Shake:[function(e,t,n){"use strict";cc._RF.push(t,"0859e+SOxdEAJ+RBLKTOxwS","Shake"),cc.Class({extends:cc.Component,properties:{loadNewScene:"",shakeThreshold:0},onLoad:function(){this._last_update_time=0,this._time=10,this._enableDeviceMotion()},_enableDeviceMotion:function(){cc.systemEvent.setAccelerometerEnabled(!0),cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},_destroyDeviceMotion:function(){cc.systemEvent.setAccelerometerEnabled(!1),cc.systemEvent.off(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},onDeviceMotionEvent:function(e){var t=0,n=0,c=0,i=0,s=0,o=0,a=(new Date).getTime();if(a-this._last_update_time>this._time){var r=a-this._last_update_time;this._last_update_time=a,t=e.acc.x,n=e.acc.y,c=e.acc.z,(Math.abs(t+n+c-i-s-o)/r*1e4).toFixed(2)>this.shakeThreshold&&(cc.log("请求后台"),this.togetherShake()),i=t,s=n,o=c}},togetherShake:function(){this._destroyDeviceMotion(),cc.director.loadScene(this.loadNewScene)},start:function(){}}),cc._RF.pop()},{}],Wheel:[function(o,e,t){"use strict";cc._RF.push(e,"cc236NuDKdATbSuECtwWxcm","Wheel"),cc.Class({extends:cc.Component,properties:{spinBtn:{default:null,type:cc.Button,visible:!0,displayName:"SpinBtn"},wheelSp:{default:null,type:cc.Sprite},maxSpeed:{default:5,type:cc.Float,max:15,min:2},duration:{default:3,type:cc.Float,max:5,min:1,tooltip:"减速前旋转时间"},acc:{default:.1,type:cc.Float,max:.2,min:.01,tooltip:"加速度"},targetID:{default:0,type:cc.Integer,max:17,min:0,tooltip:"指定结束时的齿轮"},springback:{default:!1,tooltip:"旋转结束是否回弹"},effectAudio:{default:null,url:cc.AudioClip}},onLoad:function(){cc.log("....onload"),this.wheelState=0,this.curSpeed=0,this.spinTime=0,this.gearNum=4,this.defaultAngle=0,this.gearAngle=360/this.gearNum,this.wheelSp.node.rotation=this.defaultAngle,this.finalAngle=0,this.effectFlag=0,cc.sys.isBrowser||cc.loader.loadRes("Sound/game_turntable",function(e,t){e&&cc.log("...err:"+e)}),this.spinBtn.node.on(cc.Node.EventType.TOUCH_END,function(e){cc.log("begin spin"),0===this.wheelState&&(this.decAngle=720,this.wheelState=1,this.curSpeed=0,this.spinTime=0)}.bind(this))},start:function(){},caculateFinalAngle:function(e){this.finalAngle=360-this.targetID*this.gearAngle+this.defaultAngle,this.springback&&(this.finalAngle+=this.gearAngle)},editBoxDidBegin:function(e){},editBoxDidChanged:function(e){},editBoxDidEndEditing:function(e){var t=parseInt(e.string);if(isNaN(t))return cc.sys.isBrowser?alert("please input a number!"):cc.log(".....invalid input"),void(this.targetID=Math.round(Math.random()*(this.gearNum-1)));this.targetID=t},update:function(e){if(0!==this.wheelState)if(this.effectFlag+=this.curSpeed,!cc.sys.isBrowser&&this.effectFlag>=this.gearAngle&&(this.audioID,this.audioID=cc.audioEngine.playEffect(cc.url.raw("resources/Sound/game_turntable.mp3")),this.effectFlag=0),1==this.wheelState)if(this.spinTime+=e,this.wheelSp.node.rotation=this.wheelSp.node.rotation+this.curSpeed,this.curSpeed<=this.maxSpeed)this.curSpeed+=this.acc;else{if(this.spinTime<this.duration)return;var t=o("Config");this.targetID=1,this.finalAngle=t.gearInfo[this.targetID],this.maxSpeed=this.curSpeed,this.springback&&(this.finalAngle+=this.gearAngle),this.wheelSp.node.rotation=this.finalAngle,this.wheelState=2}else if(2==this.wheelState){var n=this.wheelSp.node.rotation,c=n-this.finalAngle;if(this.curSpeed=this.maxSpeed*((this.decAngle-c)/this.decAngle)+.2,this.wheelSp.node.rotation=n+this.curSpeed,this.decAngle-c<=0)if(this.wheelState=0,this.wheelSp.node.rotation=this.finalAngle,this.springback){var i=cc.rotateBy(.6,-this.gearAngle),s=cc.sequence(cc.delayTime(.2),i,cc.callFunc(this.showRes,this));this.wheelSp.node.runAction(s)}else this.showRes()}},showRes:function(){0===this.targetID?cc.director.loadScene("firstPrize"):1===this.targetID?cc.director.loadScene("secondPrize"):2===this.targetID?cc.director.loadScene("thirdPrize"):cc.director.loadScene("prizelessA")}}),cc._RF.pop()},{Config:"Config"}],countDown:[function(e,t,n){"use strict";cc._RF.push(t,"793d9WVf09JwrmLRKbn7ptM","countDown"),cc.Class({extends:cc.Component,properties:{time:1,loadNewScene:""},onLoad:function(){this.callback=function(){cc.director.loadScene(this.loadNewScene)},this.schedule(this.callback,this.time)}}),cc._RF.pop()},{}],share:[function(e,t,n){"use strict";cc._RF.push(t,"087afJvv0xEhqAIuIV34sIP","share"),cc.Class({extends:cc.Component,properties:{},start:function(){},share:function(){cc.director.loadScene("share")}}),cc._RF.pop()},{}],submitContact:[function(o,e,t){"use strict";cc._RF.push(e,"24705iEYhFDi7YrChQGw0um","submitContact"),cc.Class({extends:cc.Component,properties:{zhNameText:{default:null,type:cc.EditBox},telephoneText:{default:null,type:cc.EditBox},addressText:{default:null,type:cc.EditBox}},submitContact:function(){var e=o("Config"),t=(this.submitTip,this.zhNameText.string),n=this.telephoneText.string,c=this.addressText.string,i="userId="+encodeURIComponent(e.uid)+"&zhName="+encodeURIComponent(t)+"&telephone="+encodeURIComponent(n)+"&address="+encodeURIComponent(c),s=cc.loader.getXMLHttpRequest();s.onreadystatechange=function(){if(4==s.readyState&&200<=s.status&&s.status<400){var e=JSON.parse(s.responseText);cc.log(e.code),1===e.code&&cc.director.loadScene("contactSuccess")}},s.open("POST","/aihun/addContact",!0),s.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded"),s.send(i)}}),cc._RF.pop()},{Config:"Config"}]},{},["Config","Global","HomeGame","Invitation","LoadScene","Loading","NextGame","PlayGame","Shake","Wheel","countDown","share","submitContact"]);