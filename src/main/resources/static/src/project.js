require=function s(o,a,r){function u(n,e){if(!a[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var i=a[n]={exports:{}};o[n][0].call(i.exports,function(e){var t=o[n][1][e];return u(t||e)},i,i.exports,s,o,a,r)}return a[n].exports}for(var d="function"==typeof require&&require,e=0;e<r.length;e++)u(r[e]);return u}({AngleShake:[function(e,t,n){"use strict";cc._RF.push(t,"91327E5mtdMpqJqNh+Py8qB","AngleShake"),cc.Class({extends:cc.Component,properties:{duration:0,angle:0},onLoad:function(){var e=cc.sequence(cc.rotateTo(this.duration,this.angle),cc.rotateTo(this.duration,-1*this.angle));this.node.runAction(cc.repeatForever(e))},start:function(){}}),cc._RF.pop()},{}],Config:[function(e,t,n){"use strict";cc._RF.push(t,"fe9daLU595Plb4kDTjl/D3B","Config");var c=c||{};c.gearInfo=[315,45,135,225],c.domain="",c.isSingle=1,c.isFollower=0,c.uid="",c.gameTeamId="",c.isOpenSpeeker=!0,t.exports=c,cc._RF.pop()},{}],HomeGame:[function(e,t,n){"use strict";cc._RF.push(t,"76bb89LL9JIFrWJBNbSxkbM","HomeGame"),cc.Class({extends:cc.Component,properties:{singleBtn:{default:null,type:cc.Button},doubleBtn:{default:null,type:cc.Button},descBtn:{default:null,type:cc.Button},singleScene:"",doubleScene:"",descScene:""},onLoad:function(){null!==this.singleBtn&&this.singleBtn.node.on("click",function(){this.switchScene(this.singleScene)},this),null!==this.doubleBtn&&this.doubleBtn.node.on("click",function(){this.switchScene(this.doubleScene)},this),null!==this.descBtn&&this.descBtn.node.on("click",function(){this.switchScene(this.descScene)},this)},switchScene:function(e){cc.director.loadScene(e)}}),cc._RF.pop()},{}],Invitation:[function(s,e,t){"use strict";cc._RF.push(e,"a94769tGpJAAouGZicygn2K","Invitation"),cc.Class({extends:cc.Component,properties:{time:1,loadNewScene:""},onLoad:function(){var i=s("Config"),e=i.domain+"/aihun/getQRCode",c=this,t=cc.loader.getXMLHttpRequest(),n="userId="+i.uid;t.onreadystatechange=function(){if(4==t.readyState&&200<=t.status&&t.status<400){var e=JSON.parse(t.responseText);i.isSingle=0,i.gameTeamId=e.gameTeamId,cc.loader.load(e.imgUrl,function(e,t){var n=new cc.SpriteFrame(t);c.node.getComponent(cc.Sprite).spriteFrame=n})}},t.open("POST",e,!0),t.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded"),t.send(n),this.callback=function(){var e=this,t=i.domain+"/aihun/isFollowerJoin",n=cc.loader.getXMLHttpRequest(),c="gameTeamId="+i.gameTeamId+"&userId="+i.uid;n.onreadystatechange=function(){4==n.readyState&&200<=n.status&&n.status<400&&(1===JSON.parse(n.responseText).code&&(e.unschedule(e.callback),cc.director.loadScene(e.loadNewScene)))},n.open("POST",t,!0),n.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded"),n.send(c)},this.schedule(this.callback,this.time)},start:function(){}}),cc._RF.pop()},{Config:"Config"}],LoadScene:[function(e,t,n){"use strict";cc._RF.push(t,"7569chFCwdAM6eBX3b01Dhc","LoadScene"),cc.Class({extends:cc.Component,properties:{},start:function(){},loadAddContactScene:function(){cc.director.loadScene("contact")},loadShare:function(){cc.director.loadScene("share")},loadHome:function(){cc.director.loadScene("home")}}),cc._RF.pop()},{}],Loading:[function(e,t,n){"use strict";cc._RF.push(t,"14fd5RPbwJAWpTa1VjWkbhL","Loading"),cc.Class({extends:cc.Component,properties:{time:1,loadNewScene:""},onLoad:function(){var c=this,i=e("Config");i.uid=this.getParam("userId"),this.callback=function(){var e=this.getParam("uid");if(null===e)cc.director.loadScene(c.loadNewScene);else{var t=i.domain+"/aihun/getGameTeam?uid="+e+"&userId="+i.uid,n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(4==n.readyState&&200<=n.status&&n.status<400){var e=JSON.parse(n.responseText);1===e.code?(i.isFollower=1,i.isSingle=0,i.gameTeamId=e.data.id,cc.director.loadScene("teaBeginGame")):cc.director.loadScene(c.loadNewScene)}},n.open("GET",t,!0),n.send(null)}},this.schedule(this.callback,this.time)},start:function(){},getParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}}),cc._RF.pop()},{Config:"Config"}],MoveShake:[function(e,t,n){"use strict";cc._RF.push(t,"898be6sJjlDcLWZNljozvMS","MoveShake"),cc.Class({extends:cc.Component,properties:{duration:0,distance:0},onLoad:function(){var e=this.node.x,t=cc.sequence(cc.moveTo(this.duration,e+this.distance,this.node.y),cc.moveTo(this.duration,e,this.node.y));this.node.runAction(cc.repeatForever(t))},start:function(){}}),cc._RF.pop()},{}],Music:[function(t,e,n){"use strict";cc._RF.push(e,"43c84B2RGlL8ZOlMBRW8WK7","Music"),cc.Class({extends:cc.Component,properties:{audio:{url:cc.AudioClip,default:null}},onLoad:function(){var t=this;cc.sys.os===cc.sys.OS_ANDROID&&this.playMusic(),this.node.on("click",function(e){t.clickMusicBtn()})},start:function(){},onDestroy:function(){cc.audioEngine.stop(this.current)},stopMusic:function(){cc.audioEngine.stop(this.current);var e=document.getElementById("musicAudio");e&&e.pause()},playMusic:function(){this.current=cc.audioEngine.play(this.audio,!0,1)},clickMusicBtn:function(){var e=t("Config"),n=this;e.isOpenSpeeker?(this.stopMusic(),e.isOpenSpeeker=!1,cc.loader.loadRes("closeMusic",cc.SpriteFrame,function(e,t){n.node.getComponent(cc.Sprite).spriteFrame=t})):(this.playMusic(),cc.loader.loadRes("openMusic",cc.SpriteFrame,function(e,t){n.node.getComponent(cc.Sprite).spriteFrame=t}),e.isOpenSpeeker=!0)}}),cc._RF.pop()},{Config:"Config"}],NextGame:[function(e,t,n){"use strict";cc._RF.push(t,"1f63fco9cREa7mVvU06M3Yf","NextGame"),cc.Class({extends:cc.Component,properties:{firstBtn:{default:null,type:cc.Button},secondBtn:{default:null,type:cc.Button},firstScene:"",secondScene:""},onLoad:function(){null!==this.firstBtn&&this.firstBtn.node.on("click",function(){this.switchScene(this.firstScene)},this),null!==this.secondBtn&&this.secondBtn.node.on("click",function(){this.switchScene(this.secondScene)},this)},switchScene:function(e){cc.director.loadScene(e)}}),cc._RF.pop()},{}],PlayGame:[function(e,t,n){"use strict";cc._RF.push(t,"9f656w/2p1Fu7QjuowcDmmy","PlayGame");var o=e("Config");cc.Class({extends:cc.Component,properties:{cows:{default:null,type:cc.Node},distance:0,shakeThreshold:0,standardDistance:0,minScale:0,cdSpeed:0,cdTime:0,progressBar:{default:null,type:cc.ProgressBar},audio:{default:null,url:cc.AudioClip},singleFailScene:"",doubleFailScene:"",singleSucessScene:"",doubleSucessScene:""},onLoad:function(){this._last_update_time=0,this._time=10,this._scale=1,this._enableDeviceMotion(),this.progressBar.progress=1,this._pingpong=!0},_enableDeviceMotion:function(){cc.systemEvent.setAccelerometerEnabled(!0),cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},_destroyDeviceMotion:function(){cc.systemEvent.setAccelerometerEnabled(!1),cc.systemEvent.off(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},onDeviceMotionEvent:function(e){var t=0,n=0,c=0,i=0,s=0,o=0,a=(new Date).getTime();if(a-this._last_update_time>this._time){var r=a-this._last_update_time;this._last_update_time=a,t=e.acc.x,n=e.acc.y,c=e.acc.z;var u=(Math.abs(t+n+c-i-s-o)/r*1e4).toFixed(2);if(u>this.shakeThreshold){this._scale<=this.minScale?this._scale=this.minScale:this._scale=(this.cows.y-this.node.y)/this.standardDistance;var d=cc.moveTo(.25,this.node.x,this.node.y+u/this.shakeThreshold*this.distance),l=cc.scaleTo(.25,this._scale);this.node.runAction(cc.spawn(d,l))}i=t,s=n,o=c}},onCollisionEnter:function(e,t){0===o.isSingle?this.saveGameState(1,this.doubleSucessScene):this.finishGame(this.singleSucessScene)},onDestroy:function(){cc.audioEngine.stop(this.didi)},stopMusic:function(){cc.audioEngine.stop(this.didi)},playMusic:function(){this.didi=cc.audioEngine.play(this.audio,!0,1)},start:function(){var e=this;this.countDown=function(){e.cdTime<=0&&(e.stopMusic(),0===o.isSingle?e.saveGameState(0,e.doubleFailScene):e.finishGame(e.singleFailScene)),3==e.cdTime&&e.playMusic(),e.cdTime--},this.schedule(this.countDown,1),cc.director.getCollisionManager().enabled=!0},finishGame:function(e){this.unschedule(this.countDown),this._pingpong=!1,this._destroyDeviceMotion(),cc.director.loadScene(e)},update:function(e){this._updateProgressBar(this.progressBar,e)},_updateProgressBar:function(e,t){var n=e.progress;this._pingpong&&(n-=t*this.cdSpeed),e.progress=n},saveGameState:function(e,t){var n=o.domain+"/aihun/postGameStatus",c=this,i=cc.loader.getXMLHttpRequest(),s="gameTeamId="+o.gameTeamId+"&userId="+o.uid+"&gameStatus="+e;i.onreadystatechange=function(){4==i.readyState&&200<=i.status&&i.status<400&&c.finishGame(t)},i.open("POST",n,!0),i.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded"),i.send(s)}}),cc._RF.pop()},{Config:"Config"}],RemixGame:[function(e,t,n){"use strict";cc._RF.push(t,"fae6exnVmNJP5oGVENwDEUr","RemixGame"),cc.Class({extends:cc.Component,properties:{nextBtn:{default:null,type:cc.Button},prizeScene:"",time:0,restartScene:"",promptScene:""},onLoad:function(){var i=e("Config");null!==this.nextBtn&&this.nextBtn.node.on("click",function(){var e=this,t=i.domain+"/aihun/isPartnerSharked",n="gameTeamId="+i.gameTeamId+"&userId="+i.uid,c=cc.loader.getXMLHttpRequest();c.onreadystatechange=function(){4==c.readyState&&200<=c.status&&c.status<400&&(1===JSON.parse(c.responseText).code?cc.director.loadScene(e.prizeScene):cc.director.loadScene(e.promptScene))},c.open("POST",t,!0),c.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded"),c.send(n)},this),this.countDown=function(){var t=this,e=i.domain+"/aihun/getGameStatus?gameTeamId="+i.gameTeamId+"&userId="+i.uid,n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(4==n.readyState&&200<=n.status&&n.status<400){var e=JSON.parse(n.responseText);1===e.code?t.unschedule(t.countDown):0===e.code&&(t.unschedule(t.countDown),cc.director.loadScene(t.restartScene))}},n.open("GET",e,!0),n.send()},this.schedule(this.countDown,this.time)}}),cc._RF.pop()},{Config:"Config"}],Shake:[function(e,t,n){"use strict";cc._RF.push(t,"0859e+SOxdEAJ+RBLKTOxwS","Shake");var i=e("Config");cc.Class({extends:cc.Component,properties:{loadNewScene:"",shakeThreshold:0,time:0,restartScene:""},onLoad:function(){this._last_update_time=0,this._time=10,this._enableDeviceMotion(),this.countDown=function(){var t=this,e=i.domain+"/aihun/getGameStatus?gameTeamId="+i.gameTeamId+"&userId="+i.uid,n=cc.loader.getXMLHttpRequest();n.onreadystatechange=function(){if(4==n.readyState&&200<=n.status&&n.status<400){var e=JSON.parse(n.responseText);1===e.code?t.unschedule(t.countDown):0===e.code&&(t.unschedule(t.countDown),cc.director.loadScene(t.restartScene))}},n.open("GET",e,!0),n.send()},this.schedule(this.countDown,this.time)},_enableDeviceMotion:function(){cc.systemEvent.setAccelerometerEnabled(!0),cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},_destroyDeviceMotion:function(){cc.systemEvent.setAccelerometerEnabled(!1),cc.systemEvent.off(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},onDeviceMotionEvent:function(e){var t=0,n=0,c=0,i=0,s=0,o=0,a=(new Date).getTime();if(a-this._last_update_time>this._time){var r=a-this._last_update_time;this._last_update_time=a,t=e.acc.x,n=e.acc.y,c=e.acc.z,(Math.abs(t+n+c-i-s-o)/r*1e4).toFixed(2)>this.shakeThreshold&&this.togetherShake(),i=t,s=n,o=c}},togetherShake:function(){var e=this,t=i.domain+"/aihun/postSharkTime",n="gameTeamId="+i.gameTeamId+"&uid="+i.uid+"&userId="+i.uid,c=cc.loader.getXMLHttpRequest();c.onreadystatechange=function(){4==c.readyState&&200<=c.status&&c.status<400&&(1===JSON.parse(c.responseText).code&&cc.director.loadScene(e.loadNewScene))},c.open("POST",t,!0),c.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded"),c.send(n)},start:function(){}}),cc._RF.pop()},{Config:"Config"}],Wheel:[function(o,e,t){"use strict";cc._RF.push(e,"cc236NuDKdATbSuECtwWxcm","Wheel"),cc.Class({extends:cc.Component,properties:{spinBtn:{default:null,type:cc.Button,visible:!0,displayName:"SpinBtn"},wheelSp:{default:null,type:cc.Sprite},maxSpeed:{default:5,type:cc.Float,max:15,min:2},duration:{default:3,type:cc.Float,max:5,min:1,tooltip:"减速前旋转时间"},acc:{default:.1,type:cc.Float,max:.2,min:.01,tooltip:"加速度"},targetID:{default:0,type:cc.Integer,max:17,min:0,tooltip:"指定结束时的齿轮"},springback:{default:!1,tooltip:"旋转结束是否回弹"},effectAudio:{default:null,url:cc.AudioClip}},onLoad:function(){var e=o("Config");this.wheelState=0,this.curSpeed=0,this.spinTime=0,this.gearNum=4,this.defaultAngle=0,this.gearAngle=360/this.gearNum,this.wheelSp.node.rotation=this.defaultAngle,this.finalAngle=0,this.effectFlag=0;var t=this,n=e.domain+"/aihun/draw?userId="+e.uid,c=cc.loader.getXMLHttpRequest();c.onreadystatechange=function(){if(4==c.readyState&&200<=c.status&&c.status<400){var e=JSON.parse(c.responseText);1===e.code?(cc.log(e.drawResult),t.targetID=e.drawResult):t.targetID=3}else t.targetID=3},c.open("GET",n,!0),c.send(null),this.spinBtn.node.on(cc.Node.EventType.TOUCH_END,function(e){cc.log("begin spin"),0===this.wheelState&&(this.decAngle=720,this.wheelState=1,this.curSpeed=0,this.spinTime=0)}.bind(this))},start:function(){},caculateFinalAngle:function(e){this.finalAngle=360-this.targetID*this.gearAngle+this.defaultAngle,this.springback&&(this.finalAngle+=this.gearAngle)},update:function(e){if(0!==this.wheelState)if(this.effectFlag+=this.curSpeed,!cc.sys.isBrowser&&this.effectFlag>=this.gearAngle&&(this.audioID,this.audioID=cc.audioEngine.playEffect(cc.url.raw("resources/Sound/game_turntable.mp3")),this.effectFlag=0),1==this.wheelState)if(this.spinTime+=e,this.wheelSp.node.rotation=this.wheelSp.node.rotation+this.curSpeed,this.curSpeed<=this.maxSpeed)this.curSpeed+=this.acc;else{if(this.spinTime<this.duration)return;var t=o("Config");this.finalAngle=t.gearInfo[this.targetID],this.maxSpeed=this.curSpeed,this.springback&&(this.finalAngle+=this.gearAngle),this.wheelSp.node.rotation=this.finalAngle,this.wheelState=2}else if(2==this.wheelState){var n=this.wheelSp.node.rotation,c=n-this.finalAngle;if(this.curSpeed=this.maxSpeed*((this.decAngle-c)/this.decAngle)+.2,this.wheelSp.node.rotation=n+this.curSpeed,this.decAngle-c<=0)if(this.wheelState=0,this.wheelSp.node.rotation=this.finalAngle,this.springback){var i=cc.rotateBy(.6,-this.gearAngle),s=cc.sequence(cc.delayTime(.2),i,cc.callFunc(this.showRes,this));this.wheelSp.node.runAction(s)}else this.showRes()}},showRes:function(){0===this.targetID?cc.director.loadScene("firstPrize"):1===this.targetID?cc.director.loadScene("secondPrize"):2===this.targetID?cc.director.loadScene("thirdPrize"):cc.director.loadScene("prizelessA")}}),cc._RF.pop()},{Config:"Config"}],countDown:[function(e,t,n){"use strict";cc._RF.push(t,"793d9WVf09JwrmLRKbn7ptM","countDown"),cc.Class({extends:cc.Component,properties:{audio:{default:null,url:cc.AudioClip},time:1,loadNewScene:""},onLoad:function(){null!==this.audio&&(this.didi=cc.audioEngine.play(this.audio,!1,1)),this.countDown=function(){cc.director.loadScene(this.loadNewScene)},this.schedule(this.countDown,this.time)},onDestroy:function(){cc.audioEngine.stop(this.didi)}}),cc._RF.pop()},{}],share:[function(e,t,n){"use strict";cc._RF.push(t,"087afJvv0xEhqAIuIV34sIP","share"),cc.Class({extends:cc.Component,properties:{},start:function(){},share:function(){cc.director.loadScene("share")}}),cc._RF.pop()},{}],submitContact:[function(o,e,t){"use strict";cc._RF.push(e,"24705iEYhFDi7YrChQGw0um","submitContact"),cc.Class({extends:cc.Component,properties:{zhNameText:{default:null,type:cc.EditBox},telephoneText:{default:null,type:cc.EditBox},addressText:{default:null,type:cc.EditBox}},submitContact:function(){var e=o("Config"),t=(this.submitTip,this.zhNameText.string),n=this.telephoneText.string,c=this.addressText.string;null!==t&&null!==n&&null!==c&&""!==t.trim()&&""!==n.trim()&&""!==c.trim()||alert("请把信息填写完整！");var i="userId="+encodeURIComponent(e.uid)+"&zhName="+encodeURIComponent(t)+"&telephone="+encodeURIComponent(n)+"&address="+encodeURIComponent(c),s=cc.loader.getXMLHttpRequest();s.onreadystatechange=function(){if(4==s.readyState&&200<=s.status&&s.status<400){var e=JSON.parse(s.responseText);cc.log(e.code),1===e.code&&cc.director.loadScene("contactSuccess")}},s.open("POST","/aihun/addContact",!0),s.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded"),s.send(i)}}),cc._RF.pop()},{Config:"Config"}]},{},["AngleShake","Config","HomeGame","Invitation","LoadScene","Loading","MoveShake","Music","NextGame","PlayGame","RemixGame","Shake","Wheel","countDown","share","submitContact"]);